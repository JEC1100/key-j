(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t){e.exports=function(e){return e<.3?"Low":e<.6?"Medium":e<.9?"High":"VERY HIGH"}},14:function(e,t){e.exports=function(e){return e<.2?"Time for bed":e<.4?"Chill":e<.6?"In the middle":e<.8?"Warming up":"Boogy baby!!"}},15:function(e,t){e.exports=function(e,t){return{0:"C",1:"C#/Db",2:"D",3:"D#/Eb",4:"E",5:"F",6:"F#Gb",7:"G",8:"G#/Ab",9:"A",10:"A#/Bb",11:"B"}[e]+(t?" maj":" min")}},16:function(e,t){e.exports=function(e){return e<.2?"\ud83d\ude22":e<.4?"\ud83d\ude41":e<.6?"\ud83d\ude10":e<.8?"\ud83d\ude42":"\ud83d\ude04"}},24:function(e,t,c){},34:function(e,t){e.exports=function(e,t){var c=Math.min(e,t),s=Math.max(e,t),n=100-(s-c)/s*100;return Math.round(n)}},35:function(e,t){var c=function(e,t){return e%2&&(e=e<6?e+6:e-6),t?e:e-3};e.exports=function(e,t,s,n){var a=Math.abs(c(e,s)-c(t,n)),i=a>6?a-6:6-a;return Math.round(i/6*1e4)/100}},36:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(17),i=c.n(a),r=(c(24),c(3)),j=c(6),l=c(2),o=c(37),b=c(0),d=function(e){var t=Object(s.useState)([]),c=Object(r.a)(t,2),n=c[0],a=c[1],i=Object(s.useState)(null),j=Object(r.a)(i,2),d=j[0],h=j[1],m=Object(l.g)();return Object(s.useEffect)((function(){fetch("/api/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({songName:e.redirect?m.songTitle:e.songTitle})}).then((function(e){if(!e.ok)throw Error("Could not fetch data.");return e.json()})).then((function(e){return a(e.songs)})).catch((function(e){h(e.message)}))}),[e.songTitle]),e.redirect?Object(b.jsxs)("div",{children:[d&&Object(b.jsx)("div",{children:d}),n.length>0&&n.map((function(e){return Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:e.albumUrl,style:{height:240}})}),Object(b.jsxs)("div",{className:"song-section",children:[Object(b.jsx)("a",{href:"/track/"+e.id+"/"+e.albumUrl.split("/")[4]+"/"+e.name,children:Object(b.jsxs)("div",{className:"song-div",children:["Song: ",Object(b.jsx)("h2",{children:e.name})]})},Object(o.a)()),Object(b.jsx)("a",{href:["/album",e.album,e.albumId,e.albumUrl.split("/")[4]].join("/"),children:Object(b.jsxs)("div",{className:"song-div",children:["Album: ",Object(b.jsx)("h2",{children:e.album})]})},Object(o.a)()),Object(b.jsx)("a",{href:"/artist/"+e.artistId+"/"+e.artist,children:Object(b.jsxs)("div",{className:"song-div",children:["Artist: ",Object(b.jsx)("h2",{children:e.artist})]})},Object(o.a)())]})]},Object(o.a)())}))]}):Object(b.jsxs)("div",{children:[d&&Object(b.jsx)("div",{children:d}),n.length>0&&n.map((function(t){return Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:t.albumUrl,style:{height:240}})}),Object(b.jsxs)("div",{className:"song-section",children:[Object(b.jsx)("a",{href:["/compare",e.songAId,m.albumUrl,m.trackName,t.id,t.albumUrl.split("/")[4],t.name].join("/"),children:Object(b.jsxs)("div",{className:"song-div",children:["Song: ",Object(b.jsx)("h2",{children:t.name})]})},Object(o.a)()),Object(b.jsx)("a",{href:["/album",t.album,t.albumId,t.albumUrl.split("/")[4]].join("/"),children:Object(b.jsxs)("div",{className:"song-div",children:["Album: ",Object(b.jsx)("h2",{children:t.album})]})},Object(o.a)()),Object(b.jsx)("a",{href:"/artist/"+t.artistId+"/"+t.artist,children:Object(b.jsxs)("div",{className:"song-div",children:["Artist: ",Object(b.jsx)("h2",{children:t.artist})]})},Object(o.a)())]})]},Object(o.a)())}))]})},h=function(e){var t=Object(s.useState)(""),c=Object(r.a)(t,2),n=c[0],a=c[1],i=Object(l.f)();return Object(b.jsxs)("form",{className:"search-bar",onSubmit:function(t){t.preventDefault(),e.submit(n),e.redirect&&i.push("/tracks/"+n)},"data-testid":"form",children:[Object(b.jsx)("input",{className:"text-field",type:"text","data-testid":"songname",value:n,onChange:function(e){e.preventDefault(),a(e.target.value)},id:"songname",placeholder:e.placeholder,autoFocus:!0}),Object(b.jsx)("input",{className:"submit",type:"submit",value:"Submit"})]})},m=function(e){var t=Object(s.useState)([]),c=Object(r.a)(t,2),n=c[0],a=c[1],i=Object(l.g)(),j=e.song[0].id;return Object(s.useEffect)((function(){fetch("/api/songs_like_this",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({song:e.song})}).then((function(e){if(e.ok)return e.json();console.log(e)})).then((function(e){return a(e.songs.tracks)}))}),[]),Object(b.jsx)("div",{children:n.length>0&&n.map((function(e,t){return Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:e.album.images[0].url,style:{height:240}})}),Object(b.jsxs)("div",{className:"song-section",children:[Object(b.jsx)("a",{href:["/compare",j,i.albumUrl,i.trackName,e.id,e.album.images[0].url.split("/")[4],e.name].join("/"),children:Object(b.jsxs)("div",{className:"song-div",children:["Song: ",Object(b.jsx)("h2",{children:e.name})]})},Object(o.a)()),Object(b.jsx)("a",{href:["/album",e.album.name,e.album.id,e.album.images[0].url.split("/")[4]].join("/"),children:Object(b.jsxs)("div",{className:"song-div",children:["Album: ",Object(b.jsx)("h2",{children:e.album.name})]})},Object(o.a)())]})]},t)}))})},O=c(13),u=c(14),x=c(15),g=c(16),p=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),i=Object(r.a)(a,2),j=i[0],o=i[1],p=Object(s.useState)(""),v=Object(r.a)(p,2),f=v[0],N=v[1],y=Object(s.useState)(!1),S=Object(r.a)(y,2),k=S[0],E=S[1],w=Object(l.g)();return Object(s.useEffect)((function(){fetch("/api/track_audio",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({songId:w.id})}).then((function(e){if(e.ok)return e.json();console.log(e)})).then((function(e){return n(e.audioFeatures)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:"https://i.scdn.co/image/"+w.albumUrl,style:{height:240}})}),Object(b.jsxs)("div",{className:"song-section",children:[Object(b.jsx)("h2",{children:w.trackName}),Object(b.jsx)("h3",{children:" Song Statistics: "}),Object(b.jsxs)("p",{children:[" ENERGY: ",O(c.energy)," ",Object(b.jsx)("br",{}),"DANCEABILITY: ",u(c.danceability)," ",Object(b.jsx)("br",{}),"TEMPO: ",c.tempo," BPM ",Object(b.jsx)("br",{}),"KEY: ",x(c.key,c.mode),Object(b.jsx)("br",{}),"MOOD: ",Object(b.jsx)("span",{role:"img","aria-label":"mood-emoji",children:g(c.valence)})]})]})]}),Object(b.jsx)(h,{submit:function(e){N(e),o(!0),E(!1)},redirect:!1,placeholder:"Enter another song to compare track info"}),Object(b.jsx)("button",{className:"similar-songs-button",onClick:function(){E(!0),o(!1)},children:"See Similar Songs"}),Object(b.jsx)("div",{className:"breaker"}),k?Object(b.jsx)(m,{song:[c]}):null,j?Object(b.jsx)(d,{songTitle:f,redirect:!1,songAId:w.id}):null]})},v=c(13),f=c(14),N=c(15),y=c(16),S=c(34),k=c(35),E=function(){var e=Object(l.g)(),t=Object(s.useState)({}),c=Object(r.a)(t,2),n=c[0],a=c[1],i=Object(s.useState)({}),j=Object(r.a)(i,2),o=j[0],d=j[1];Object(s.useEffect)((function(){fetch("/api/compare",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({songId:e})}).then((function(e){if(e.ok)return e.json();console.log(e)})).then((function(e){console.log(e.songs[0],e.songs[1]),a(e.songs[0]),d(e.songs[1]),console.log("here",n,o)}))}),[]);var h=function(e){return 10*e.energy},m=function(e){return 10*e.danceability},O=function(e){return 10*e.tempo/250},u=function(e){return 10*e.key/12},x=function(e){return 10*e.valence};return Object(b.jsxs)("div",{className:"song-compare-container",children:[Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:"https://i.scdn.co/image/"+e.songAalbumUrl,style:{height:200}})}),Object(b.jsxs)("div",{className:"song-info",children:[Object(b.jsx)("h2",{children:e.songAName}),Object(b.jsx)("h4",{children:"Song Statistics:"}),Object(b.jsxs)("p",{children:["ENERGY: ",v(n.energy)," ",Object(b.jsx)("br",{}),"DANCEABILITY: ",f(n.danceability),Object(b.jsx)("br",{}),"TEMPO: ",n.tempo," BPM ",Object(b.jsx)("br",{}),"KEY: ",N(n.key),Object(b.jsx)("br",{}),"MOOD ",y(n.valence)]})]})]}),Object(b.jsxs)("div",{className:"song-compare-div",children:[Object(b.jsx)("h2",{children:"Comparison"}),"Energy",Object(b.jsxs)("div",{className:"chart-row",children:[Object(b.jsx)("div",{className:"chart-bar-box left",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(h(n),"vw")}})}),Object(b.jsxs)("p",{children:[S(n.energy,o.energy),"%"]}),Object(b.jsx)("div",{className:"chart-bar-box right",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(h(o),"vw")}})})]}),"Danceability",Object(b.jsxs)("div",{className:"chart-row",children:[Object(b.jsx)("div",{className:"chart-bar-box left",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(m(n),"vw")}})}),Object(b.jsxs)("p",{children:[S(n.danceability,o.danceability),"%"]}),Object(b.jsx)("div",{className:"chart-bar-box right",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(m(o),"vw")}})})]}),"Tempo",Object(b.jsxs)("div",{className:"chart-row",children:[Object(b.jsx)("div",{className:"chart-bar-box left",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(O(n),"vw")}})}),Object(b.jsxs)("p",{children:[S(n.tempo,o.tempo),"%"]}),Object(b.jsx)("div",{className:"chart-bar-box right",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(O(o),"vw")}})})]}),"Key",Object(b.jsxs)("div",{className:"chart-row",children:[Object(b.jsx)("div",{className:"chart-bar-box left",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(u(n),"vw")}})}),Object(b.jsxs)("p",{children:[Math.round(k(n.key,o.key,n.mode,o.mode)),"%"]}),Object(b.jsx)("div",{className:"chart-bar-box right",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(u(o),"vw")}})})]}),"Mood",Object(b.jsxs)("div",{className:"chart-row",children:[Object(b.jsx)("div",{className:"chart-bar-box left",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(x(n),"vw")}})}),Object(b.jsxs)("p",{children:[S(n.valence,o.valence),"%"]}),Object(b.jsx)("div",{className:"chart-bar-box right",children:Object(b.jsx)("div",{className:"chart-bar",style:{width:"".concat(x(o),"vw")}})})]})]}),Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:"https://i.scdn.co/image/"+e.songBalbumUrl,style:{height:180}})}),Object(b.jsxs)("div",{className:"song-info",children:[Object(b.jsx)("h2",{children:e.songBName}),Object(b.jsx)("h4",{children:"Song Statistics"}),Object(b.jsxs)("p",{children:["ENERGY: ",v(o.energy)," ",Object(b.jsx)("br",{}),"DANCEABILITY: ",f(o.danceability),Object(b.jsx)("br",{}),"TEMPO: ",o.tempo," BPM ",Object(b.jsx)("br",{}),"KEY: ",N(o.key),Object(b.jsx)("br",{}),"MOOD ",y(o.valence)]})]})]})]})},w=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(l.g)();return Object(s.useEffect)((function(){fetch("/api/artist_top_tracks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({artistId:a.artistId})}).then((function(e){if(e.ok)return e.json();console.log(e)})).then((function(e){return n(e.artist_tracks)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"song-container",children:Object(b.jsxs)("h2",{children:["Top 10 songs by ",a.artistName]})}),c.length>0&&c.map((function(e){return Object(b.jsxs)("div",{className:"song-container",children:[Object(b.jsx)("div",{className:"song-image",children:Object(b.jsx)("img",{src:e.albumUrl,style:{height:240}})}),Object(b.jsxs)("div",{className:"song-section",children:[Object(b.jsx)("a",{href:"/track/"+e.id+"/"+e.albumUrl.split("/")[4]+"/"+e.name,children:Object(b.jsxs)("div",{className:"song-div",children:["Song: ",Object(b.jsx)("h2",{children:e.name})]})},Object(o.a)()),Object(b.jsx)("a",{href:["/album",e.album,e.albumId,e.albumUrl.split("/")[4]].join("/"),children:Object(b.jsxs)("div",{className:"song-div",children:["Album: ",Object(b.jsx)("h2",{children:e.album})]})},Object(o.a)())]})]},Object(o.a)())}))]})},T=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(l.g)();return Object(s.useEffect)((function(){fetch("/api/get_album_tracks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({albumId:a.albumId})}).then((function(e){if(e.ok)return e.json();console.log(e)})).then((function(e){return n(e.album_tracks)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"breaker"}),Object(b.jsxs)("h1",{children:[Object(b.jsx)("img",{src:"https://i.scdn.co/image/"+a.albumUrl,style:{height:200}}),a.albumName]}),c.length>0&&c.map((function(e){return Object(b.jsx)("div",{className:"song-container",children:Object(b.jsx)("div",{className:"song-section",children:Object(b.jsx)("a",{href:"/track/"+e.id+"/"+a.albumUrl+"/"+e.name,children:Object(b.jsxs)("div",{className:"song-div",children:["Song: ",Object(b.jsxs)("h2",{children:[e.track_number,".  ",e.name]})]})},Object(o.a)())})},Object(o.a)())}))]})},A=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),c=t[0],n=t[1],a=function(e){n(e)};return Object(b.jsx)("div",{className:"background",children:Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)("header",{children:Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)("a",{href:"/",children:Object(b.jsx)("h1",{children:"| KEY-J |"})})})}),Object(b.jsx)("main",{children:Object(b.jsx)(j.a,{children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{component:function(){return Object(b.jsx)(h,{submit:a,placeholder:"Enter a song to find its key characteristics",redirect:!0})},path:"/",exact:!0}),Object(b.jsx)(l.a,{component:function(){return Object(b.jsx)(d,{songTitle:c,redirect:!0})},path:"/tracks/:songTitle",exact:!0}),Object(b.jsx)(l.a,{component:p,path:"/track/:id/:albumUrl/:trackName",exact:!0}),Object(b.jsx)(l.a,{component:E,path:"/compare/:songAid/:songAalbumUrl/:songAName/:songBid/:songBalbumUrl/:songBName",exact:!0}),Object(b.jsx)(l.a,{component:w,path:"/artist/:artistId/:artistName",exact:!0}),Object(b.jsx)(l.a,{component:T,path:"/album/:albumName/:albumId/:albumUrl",exact:!0})]})})})]})})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,38)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),s(e),n(e),a(e),i(e)}))};i.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root")),I()}},[[36,1,2]]]);
//# sourceMappingURL=main.57846bf5.chunk.js.map